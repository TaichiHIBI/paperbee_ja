# ğŸ PaperBee (æ—¥æœ¬èªè¦ç´„ãƒ»ç¿»è¨³å¯¾å¿œç‰ˆ)
<img src="images/paperbee_logo.png" width="200" height="auto" alt="logo"/>

âš ï¸ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ [theislab/paperbee](https://github.com/theislab/paperbee) ã‚’å…ƒã«ã€è«–æ–‡è¦æ—¨ã®æ—¥æœ¬èªè¨³ãƒ»è¦ç´„æ©Ÿèƒ½ã‚’ä»˜ã‘åŠ ãˆãŸã‚‚ã®ã§ã™ã€‚

PaperBeeã¯ã€æ–°ã—ã„ç§‘å­¦è«–æ–‡ã‚’è‡ªå‹•çš„ã«æ¤œç´¢ã—ã€ãŠæ°—ã«å…¥ã‚Šã®ãƒãƒ£ãƒƒãƒˆãƒ„ãƒ¼ãƒ«ã«æŠ•ç¨¿ã™ã‚‹ãŸã‚ã®Pythonã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚

ç¾åœ¨ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ :

ğŸŸ£ Slack (â€»æ—¥æœ¬èªè¦ç´„æ©Ÿèƒ½ã«å¯¾å¿œ)

ğŸ”µ Telegram

ğŸŸ¢ Zulip

ğŸŸ  Mattermost

## âœ¨ ã“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ç‚¹ï¼šæ—¥æœ¬èªè¦ç´„ãƒ»ç¿»è¨³æ©Ÿèƒ½
æœ¬ãƒ•ã‚©ãƒ¼ã‚¯ç‰ˆã§ã¯ã€LLMï¼ˆOllama, OpenAI, Geminiï¼‰ã‚’ä½¿ç”¨ã—ã¦ã€è«–æ–‡ã®ã‚¢ãƒ–ã‚¹ãƒˆãƒ©ã‚¯ãƒˆã‚’è‡ªå‹•çš„ã«æ—¥æœ¬èªã«ç¿»è¨³ãƒ»è¦ç´„ã™ã‚‹æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚

âš ï¸ é‡è¦ãªãŠçŸ¥ã‚‰ã›
æ—¥æœ¬èªã§ã®ã‚¢ãƒ–ã‚¹ãƒˆãƒ©ã‚¯ãƒˆè¦ç´„ãƒ»ç¿»è¨³å‡ºåŠ›ã¯ã€ç¾åœ¨ã€ŒSlack (ğŸŸ£)ã€ã®ã¿ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚ ä»–ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ï¼ˆTelegram, Zulip, Mattermostï¼‰ã§ã¯ã€é€šå¸¸ã®è‹±èªã‚¿ã‚¤ãƒˆãƒ«ã¨ãƒªãƒ³ã‚¯ã®ã¿ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

ğŸš€ ä»•çµ„ã¿
PaperBeeã¯ã€findpapers ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ã¦ã€æŒ‡å®šã•ã‚ŒãŸã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§PubMedã€arXivã€bioRxivã‹ã‚‰ç§‘å­¦è«–æ–‡ã‚’æ¤œç´¢ã—ã¾ã™ã€‚

å–å¾—ã—ãŸè«–æ–‡ã¯ã€ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§ã®æ‰‹å‹•é¸åˆ¥ã€ã¾ãŸã¯ LLMã«ã‚ˆã‚‹è‡ªå‹•ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚° ã«ã‚ˆã£ã¦é¸åˆ¥ã•ã‚Œã¾ã™ã€‚ é¸åˆ¥ã•ã‚ŒãŸè«–æ–‡ã¯Googleã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«è¨˜éŒ²ã•ã‚Œã€Slackãªã©ã®ãƒãƒ£ãƒ³ãƒãƒ«ã«é€šçŸ¥ã•ã‚Œã¾ã™ã€‚ è¨­å®šã¯ã‚·ãƒ³ãƒ—ãƒ«ãª config.yml ãƒ•ã‚¡ã‚¤ãƒ«ã§è¡Œã„ã¾ã™ã€‚

ğŸ“¦ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£ã—ã¦ã„ã‚‹ãŸã‚ã€ä»¥ä¸‹ã®æ‰‹é †ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ï¼š

```bash
git clone https://github.com/TaichiHIBI/paperbee_ja.git
cd paperbee_ja
# å¿…è¦ãªã‚‰ä»®æƒ³ç’°å¢ƒæœ‰åŠ¹åŒ–
pip install -e .
```

## ğŸ“ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰
### 1. Google Sheets ã®é€£æº
Googleã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ä½œæˆ: [å…¬å¼ã‚¬ã‚¤ãƒ‰](https://cloud.google.com/iam/docs/service-accounts-create) æ¤œç´¢ã—ãŸè«–æ–‡ã‚’ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«æ›¸ãè¾¼ã‚€ãŸã‚ã«å¿…è¦ã§ã™ã€‚

JSONã‚­ãƒ¼ã®ä½œæˆ: [å…¬å¼ã‚¬ã‚¤ãƒ‰](https://cloud.google.com/iam/docs/keys-create-delete) ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸJSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®‰å…¨ãªå ´æ‰€ã«ä¿å­˜ã—ã¦ãã ã•ã„ã€‚

Google Sheets APIã®æœ‰åŠ¹åŒ–: [Google Cloud Console](https://console.cloud.google.com/) ã§ã€ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«å¯¾ã—ã¦Google Sheets APIã‚’æœ‰åŠ¹ã«ã—ã¾ã™ã€‚

Googleã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®ä½œæˆ: [ã“ã¡ã‚‰ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ](https://docs.google.com/spreadsheets/d/15x3Ei4qtTk70xunuiJCBXyXgRgiY54UgM7EPoZw9iLY/edit?usp=drive_link) ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ä½¿ç”¨ã§ãã¾ã™ã€‚

ã‚·ãƒ¼ãƒˆã«ã¯ä»¥ä¸‹ã®åˆ—ãŒå¿…è¦ã§ã™: DOI, Date, PostedDate, IsPreprint, Title, Keywords, Preprint, URL, Abstract_JP (â€»æ—¥æœ¬èªè¦ç´„ç”¨ã«è¿½åŠ )ã€‚ ã‚·ãƒ¼ãƒˆåã¯ Papers ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®å…±æœ‰: ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ã€Œç·¨é›†è€…ã€ã¨ã—ã¦è¿½åŠ ã—ã¦ãã ã•ã„ã€‚

### 2. ğŸ”‘ NCBI APIã‚­ãƒ¼ã®å–å¾—
PaperBeeã¯PubMedã‹ã‚‰è«–æ–‡ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«NCBI APIã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ [ã“ã¡ã‚‰ã‹ã‚‰ç„¡æ–™ã®APIã‚­ãƒ¼ã‚’å–å¾—](https://www.ncbi.nlm.nih.gov/datasets/docs/v2/api/api-keys)ã—ã¦ãã ã•ã„ã€‚

### 3. ğŸ“¢ æŠ•ç¨¿ãƒãƒ£ãƒ³ãƒãƒ«ã®è¨­å®š
ä»¥ä¸‹ã®ã„ãšã‚Œã‹1ã¤ä»¥ä¸Šã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ï¼ˆæ—¥æœ¬èªè¦ç´„ã‚’è¡Œã„ãŸã„å ´åˆã¯Slackã‚’è¨­å®šã—ã¦ãã ã•ã„ï¼‰

#### ğŸŸ£ Slack (æ¨å¥¨/ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ)
1. [Slackã‚¢ãƒ—ãƒªã‚’ä½œæˆ](https://api.slack.com/apps/new)ã—ã¾ã™ ("From an app manifest" ã‚’é¸æŠ)ã€‚
2. ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚’é¸æŠã—ã¾ã™ã€‚
3. `manifest.json` ã®å†…å®¹ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦è²¼ã‚Šä»˜ã‘ã¾ã™ã€‚
4. ã‚¢ãƒ—ãƒªã‚’ä½œæˆã—ã€ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
5. OAuth & Permissions ã§ã€ŒBot User OAuth Tokenã€ã‚’ã‚³ãƒ”ãƒ¼ã—ã€config.yml ã® bot_token ã«è²¼ã‚Šä»˜ã‘ã¾ã™ã€‚
6. Basic Information -> App-Level Tokens ã§ã€connections:write æ¨©é™ã‚’æŒã¤ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½œæˆã—ã¾ã™ã€‚
7. æŠ•ç¨¿ã—ãŸã„ãƒãƒ£ãƒ³ãƒãƒ«ã®IDã‚’ config.yml ã® SLACK_CHANNEL_ID ã«è¨­å®šã—ã¾ã™ã€‚

#### ğŸ”µ Telegram / ğŸŸ¢ Zulip / ğŸŸ  Mattermost
(è¨­å®šæ–¹æ³•ã¯ã‚ªãƒªã‚¸ãƒŠãƒ«ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚æ—¥æœ¬èªè¦ç´„æ©Ÿèƒ½ã¯éå¯¾å¿œã§ã™)

### 4. ğŸ¤– LLMã®è¨­å®šï¼ˆè‡ªå‹•ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚° & ç¿»è¨³ç”¨ï¼‰
* è‡ªå‹•ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚„æ—¥æœ¬èªç¿»è¨³ãƒ»è¦ç´„ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€LLMã®è¨­å®šãŒå¿…è¦ã§ã™ã€‚

#### Ollama (ãƒ­ãƒ¼ã‚«ãƒ«LLM / æ¨å¥¨)
* å¥½ã¿ã®ãƒ¢ãƒ‡ãƒ«ã‚’pullã—ã¾ã™ï¼ˆä¾‹: `ollama pull gemma2` ã‚„ `ollama pull gpt-oss-20b`ï¼‰ã€‚
* config.yml ã® LLM_PROVIDER ã‚„ TRANSLATION_PROVIDER ã‚’ `ollama` ã«è¨­å®šã—ã¾ã™ã€‚

#### OpenAI API / Google Gemini API
* APIã‚­ãƒ¼ã‚’å–å¾—ã—ã€config.yml ã«è¨­å®šã—ã¾ã™ã€‚
* å„ç¨®ãƒ—ãƒ­ãƒã‚¤ãƒ€ã‹ã‚‰APIã‚­ãƒ¼ã‚’å–å¾—ã—ã¦ãã ã•ã„ã€‚

## âš™ï¸ è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« (Configuration)
PaperBee_jaã¯ã™ã¹ã¦ã®è¨­å®šã‚’YAMLãƒ•ã‚¡ã‚¤ãƒ«ã§ç®¡ç†ã—ã¾ã™ã€‚ ä»¥ä¸‹ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ config.yml ã¨ã—ã¦ä¿å­˜ãƒ»ç·¨é›†ã—ã¦ãã ã•ã„ã€‚

config.yml ã®ä¾‹ï¼ˆæ—¥æœ¬èªè¦ç´„æ©Ÿèƒ½ä»˜ãï¼‰

âš ï¸queryã®æ›¸ãæ–¹ã‚„Filtering promptã®å½¢å¼ã¯ã‚‚ã¨ã®æ‰‹æ³•ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
```YAML
GOOGLE_SPREADSHEET_ID: "your-google-spreadsheet-id"
GOOGLE_CREDENTIALS_JSON: "/path/to/your/google-credentials.json"
NCBI_API_KEY: "your-ncbi-api-key"

# ãƒ­ãƒ¼ã‚«ãƒ«ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ã®ãƒ‘ã‚¹
LOCAL_ROOT_DIR: "/path/to/local/root/dir"

# æ¤œç´¢ã‚¯ã‚¨ãƒªè¨­å®š
# bioRxivã¯è¤‡é›‘ãªã‚¯ã‚¨ãƒªã«å¯¾å¿œã—ã¦ã„ãªã„ãŸã‚ã€å˜ç´”ãªORæ¤œç´¢ã®ã¿è¨˜è¿°ã—ã¾ã™
query_biorxiv: "[machine learning for single-cell] OR [deep learning for single-cell] OR [AI for single-cell]"

# PubMed/arXivç”¨ã‚¯ã‚¨ãƒª (AND, OR, NOTãŒä½¿ç”¨å¯èƒ½)
query_pubmed_arxiv: "([single-cell transcriptomics]) AND ([AI] OR [machine learning] OR [deep learning])"

# -----------------------------------------------------------------------------
# LLMãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°è¨­å®š (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
# -----------------------------------------------------------------------------
LLM_FILTERING: true
LLM_PROVIDER: "ollama"       # "ollama" ã¾ãŸã¯ "openai"
LANGUAGE_MODEL: "gemma2"     # ä½¿ç”¨ã™ã‚‹ãƒ¢ãƒ‡ãƒ«å (ä¾‹: gemma2, llama3, gpt-4o-mini)
# OPENAI_API_KEY: "your-key"

# ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
# èˆˆå‘³ã®ã‚ã‚‹åˆ†é‡ã‚„ã€é™¤å¤–ã—ãŸã„è«–æ–‡ã®æ¡ä»¶ã‚’è¨˜è¿°ã—ã¾ã™ã€‚
FILTERING_PROMPT: |
  You are a researcher in a computational biology lab. Your goal is to identify papers that propose **novel algorithms**.
  Criteria for Relevance (YES):
  - Proposes a new algorithm or method.
  - Applicable to human data.
  Criteria for Exclusion (NO):
  - Purely clinical studies.
  - Review papers.
  Please answer 'yes' or 'no' to the following question: Is the following research paper relevant?

# -----------------------------------------------------------------------------
# ğŸ‡¯ğŸ‡µ æ—¥æœ¬èªç¿»è¨³ãƒ»è¦ç´„è¨­å®š (æœ¬ãƒ•ã‚©ãƒ¼ã‚¯ç‰ˆã®æ©Ÿèƒ½)
# -----------------------------------------------------------------------------
TRANSLATION_ENABLED: true
TRANSLATION_PROVIDER: "ollama"      # "ollama", "openai", "gemini"
TRANSLATION_MODEL: "gemma2"         # ãƒ¢ãƒ‡ãƒ«åã¯ç’°å¢ƒã«åˆã‚ã›ã¦ãã ã•ã„
TRANSLATION_API_KEY: ""             # OpenAI/Geminiã®å ´åˆã®ã¿å¿…è¦

# ç¿»è¨³ãƒ»è¦ç´„ç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
TRANSLATION_PROMPT: |
  ä»¥ä¸‹ã®ç§‘å­¦è«–æ–‡ã®ã‚¢ãƒ–ã‚¹ãƒˆãƒ©ã‚¯ãƒˆã‚’ã€æ—¥æœ¬èªã§3ç‚¹ã®ç®‡æ¡æ›¸ãã«è¦ç´„ã—ã¦ãã ã•ã„ã€‚
  å‡ºåŠ›ã¯æ—¥æœ¬èªã®è¦ç´„ã®ã¿ã‚’è¡Œã£ã¦ãã ã•ã„ã€‚

# -----------------------------------------------------------------------------
# Slackè¨­å®š (æ—¥æœ¬èªè¦ç´„å¯¾å¿œ)
# -----------------------------------------------------------------------------
SLACK:
  is_posting_on: true
  bot_token: "your_slack_bot_token"
  channel_id: "your_slack_channel_id"
  app_token: "your_slack_app_token"

# ãã®ä»–ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ è¨­å®š...
TELEGRAM:
  is_posting_on: false
  # ...
```

## â–¶ï¸ Botã®å®Ÿè¡Œ
è¨­å®šãŒå®Œäº†ã—ãŸã‚‰ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè¡Œã—ã¾ã™ã€‚

### ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰ã®å®Ÿè¡Œ
```Bash
# éå»1æ—¥åˆ†ã®è«–æ–‡ã‚’æ¤œç´¢ã—ã€è‡ªå‹•ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ»è¦ç´„ã—ã¦Slackã«æŠ•ç¨¿
paperbee post --config /path/to/config.yml --since 1 --databases pubmed biorxiv

--config : è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã€‚
--since : ä½•æ—¥å‰ã¾ã§é¡ã£ã¦æ¤œç´¢ã™ã‚‹ã‹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1æ—¥ï¼‰ã€‚
--interactive : (ã‚ªãƒ—ã‚·ãƒ§ãƒ³) ã“ã‚Œã‚’ä»˜ã‘ã‚‹ã¨ã€LLMãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã®å¾Œã«æ‰‹å‹•ã§ Yes/No ã‚’é¸æŠã§ãã¾ã™ã€‚è‡ªå‹•åŒ–ã™ã‚‹å ´åˆã¯ä»˜ã‘ãªã„ã§ãã ã•ã„ã€‚
--databases: (ã‚ªãƒ—ã‚·ãƒ§ãƒ³) æ¤œç´¢å¯¾è±¡ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’æŒ‡å®šã—ã¾ã™ï¼ˆä¾‹: pubmed biorxiv arxivï¼‰ã€‚
```

### è‡ªå‹•å®Ÿè¡Œï¼ˆcronï¼‰
æ¯æ—¥åˆå‰9æ™‚ã«å®Ÿè¡Œã™ã‚‹å ´åˆã®cronè¨­å®šä¾‹:
```Bash
0 9 * * * /path/to/your/venv/bin/paperbee post --config /path/to/config.yml --since 1 --databases pubmed biorxiv
```
## ğŸ—‚ï¸ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ï¼ˆä¸»ãªå¤‰æ›´ç‚¹ï¼‰
* src/PaperBee/papers/utils.py â€“ ç¿»è¨³æ©Ÿèƒ½ (translate_abstract) ã‚’è¿½åŠ ã€‚

* src/PaperBee/papers/slack_papers_formatter.py â€“ æ—¥æœ¬èªè¦ç´„ã‚’è¡¨ç¤ºã§ãã‚‹ã‚ˆã†ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’ä¿®æ­£ã€‚

* src/PaperBee/daily_posting.py â€“ è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ç¿»è¨³ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’èª­ã¿è¾¼ã‚€ã‚ˆã†ã«ä¿®æ­£ã€‚

* src/PaperBee/papers/papers_finder.py â€“ ç¿»è¨³ãƒ•ãƒ­ãƒ¼ã‚’çµ±åˆã€‚

## ğŸ“š Reference
Original PaperBee:
```
@misc{shitov_patpy_2024,
  author = {Lucarelli, Daniele and Shitov, Vladimir A. and Saur, Dieter and Zappia, Luke and Theis, Fabian J.},
  title = {PaperBee: An Automated Daily Digest Bot for Scientific Literature Monitoring},
  year = {2025},
  url = {https://github.com/theislab/paperbee},
  note = {Version 1.2.0}
}
```